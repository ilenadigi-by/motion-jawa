<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Open Graph WhatsApp Preview -->
  <meta property="og:title" content="Undangan Pernikahan Fulanah & Fulan">
  <meta property="og:description" content="Kami mengundang Bapak/Ibu/Saudara/i untuk hadir di hari bahagia kami.">
  <meta property="og:image" content="https://flower1.by-ilenadigi.my.id/Cover.jpg">
  <meta property="og:url" content="https://flower1.by-ilenadigi.my.id/">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary_large_image">

  <title>Undangan Pernikahan</title>
</head>
<style>
*{margin:0;padding:0;box-sizing:border-box}
html.lock,body.lock{overflow:hidden;height:100%}
body {
  background-image: url('Bg.jpg');
  background-position: center;
  background-size: cover;   /* atau contain */
  background-repeat: no-repeat;
  color: #fff;
  font-family: 'Lora', serif;
}

/* COVER */
#cover{
  width: 100%;
  max-width: 420px;          /* kunci tampilan portrait */
  min-height: 100vh;         /* full tinggi layar */
  margin: 0 auto;

  background: url('Cover.jpg') center / cover no-repeat; /* <<< PENTING */

  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  align-items: center;
  text-align: center;

  padding: 0 20px 120px 20px;
}
#coverCountdown {
  display: flex;
  gap: 8px;
  justify-content: center;
  margin-bottom: 12px; /* jarak countdown ke nama */
}

.cd-box {
  background: #c79aed;
  color: #fff;
  padding: 12px 16px;
  border-radius: 10px;
  font-weight: 600;
  min-width: 50px;
  text-align: center;
  font-size: 20px;
}

.cover-footer {
  margin-bottom: 20px; /* tombol buka undangan sedikit jarak dari bawah */
}

.kepada {
  color: #240046;
  font-size: 14px;
  margin-bottom: 6px;
}

.guest-name {
  color: #240046;
  font-size: 28px;
  font-weight: 600;
  margin-bottom: 12px;
}

.btn-open {
  border: 1.5px solid #240046;
  background: transparent;
  color: #240046;
  padding: 14px 36px;
  border-radius: 30px;
  font-family: 'Lora', serif;
  font-size: 15px;
  cursor: pointer;
}

/* MUSIC */
#musicBtn{
  position:fixed;
  top:20px;right:20px;
  width:52px;height:52px;
  border-radius:50%;
  background:linear-gradient(135deg,#c79aed,#e5ccf7);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
  cursor:pointer;
  display:none;
  z-index:999;
}
#musicBtn.playing{animation:spin 6s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* SECTION */
section{
  width: 100%;
  max-width: 414px;       /* lebar maksimum sesuai HP */
  aspect-ratio: 9/16;
  min-height: 100%;      /* selalu setinggi layar HP */
  margin: 0 auto;
  display: flex;
  justify-content: center;
  align-items: center;
  background-size: cover;  /* ubah dari contain menjadi cover */
  background-position: center;
  background-repeat: no-repeat;
  opacity: 0;
  transform: translateY(40px);
  transition: 1s;
  flex-direction: column;
}
section.show{opacity:1;transform:none}

/* NAV */
#nav{
  position:fixed;
  bottom:12px;
  left:50%;
  transform:translateX(-50%);
  display:none;
  gap:12px;
  background:rgba(214,179,242,0.1);
  padding:12px 18px;
  border-radius:40px;
  z-index:999;
}
#nav.show{display:flex}
.nav-item{
  width:44px;height:44px;
  border-radius:50%;
  background:rgba(36,0,70,0.7);
  display:flex;
  align-items:center;
  justify-content:center;
}
.nav-item img{width:22px}

/* GALERI */
#galeri .slider{
  width:90%; height:300px; position:relative; overflow:hidden; margin: 20px auto 12px auto;
}
#galeri .slider img{
  position:absolute; top:50%; left:50%;
  transform:translate(-50%,-50%);
  width:70%; height:70%;
  object-fit:contain;
  opacity:0;
  transition:1s;
}
#galeri .slider img.active{opacity:1}

/* THUMBNAILS (optional) */
#galeri .thumbnails{
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
  margin-top: 15px;
}

#galeri .thumbnails img{
  width: 100%;
  height:70px;
  object-fit: contain;
  border-radius: 8px;
  cursor: pointer;
  opacity: .6;
}

#galeri .thumbnails img:hover{
  opacity: 1;
  border: 2px solid #240046;
}
.gallery {
  position: relative;
  width: 90%;
  max-width: 400px;
  margin: 40px auto;
}

.gallery img {
  width: 100%;
  border-radius: 12px;
  display: block;
}

.nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(0,0,0,0.4);
  color: white;
  border: none;
  font-size: 22px;
  padding: 8px 12px;
  cursor: pointer;
  border-radius: 50%;
}

.prev { left: 10px; }
.next { right: 10px; }

/* GIFT */
#gift{
  flex-direction:column;
  justify-content:center;
}

/* CARD (rekening & alamat) */
.gift-card,
.address-box{
  background: rgba(214,179,242,1);
  border:1px solid rgba(36,0,70,1);
  border-radius:12px;
  padding:3px 5px;
  width:50%;                 /* PALING KECIL */
  max-width:170px;           /* MINI */
  margin:5px auto;
  text-align:center;
}

/* HEADER (logo + teks sejajar) */
.bank-header{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:6px;
  margin-bottom:2px;
}

/* LOGO BANK */
.bank-logo{
  width:24px;                /* kecil & ramping */
  height:auto;
  background:transparent;
}

/* TEXT */
.bank-name{
  color:#240046;
  font-size:9px;
  font-weight:500;
  line-height:1.1;
}

.rek-number{
  color:#240046;
  font-size:9px;
  line-height:1.3;
  margin:2px 0;
}

/* BUTTON COPY */
.btn-copy{
  border:1px solid #240046;
  background:transparent;
  color:#240046;
  padding:2px 10px;
  border-radius:14px;
  font-size:10px;
  cursor:pointer;
  margin-top:3px;
}

/* BUTTON KHUSUS ALAMAT */
.btn-copy.address{
  font-size:9px;
}

/* RESPONSIVE EXTRA KECIL (HP MINI) */
@media (max-width:360px){
  .gift-card,
  .address-box{
    width:52%;
    max-width:155px;
  }
  .bank-name{font-size:10px}
  .rek-number{font-size:11px}
}
/* RSVP */
#rsvp {
  flex-direction: column;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  padding: 150px 20px 80px 20px;
  min-height: 736px;
}

#rsvp form {
  background: rgba(214,179,242,0.7);
  padding: 5px;
  border-radius: 10px;
  width: 90%;
  max-width: 310px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  align-items: center; /* tombol center */
}

#rsvp input, #rsvp select, #rsvp textarea {
  width: 100%;
  padding: 5px;
  border-radius: 6px;
  border: none;
  font-family: 'Lora', serif;
  color: #fff;
  background: rgba(214,179,242,0.1);
}

#rsvp button {
  background: 240046;
  color: #240046;
  border: none;
  border-radius: 6px;
  padding: 8px 24px;
  cursor: pointer;
  font-weight: 600;
  font-family: 'Lora', serif;
  margin-top: 10px;
  align-self: center;
  transition: transform 0.2s;
}

#rsvp button:hover {
  transform: scale(1.05);
}

/* Daftar RSVP realtime */
#rsvpListWrapper {
  width: 100%;
  max-width: 360px;
  max-height: 360px; /* scrollable */
  overflow-y: auto;
  margin-top: 12px;
  padding-right: 6px;
}

#rsvpListWrapper::-webkit-scrollbar {
  width: 6px;
}

#rsvpListWrapper::-webkit-scrollbar-thumb {
  background: #240046;
  border-radius: 10px;
}

#rsvpListWrapper::-webkit-scrollbar-track {
  background: rgba(214,179,242,0.1);
}

.rsvp-item {
  background: rgba(214,179,242,0.7);
  border-radius: 14px;
  padding: 12px 14px;
  margin-bottom: 12px;
  text-align: left;
  border: 1px solid rgba(214,179,242,0.7);
}

.rsvp-item b {
  color: #240046;
}
#rsvpForm label {
  color: #240046;
  font-size: 16px;
  font-weight: 500;
  margin-bottom: 4px;
  display: block;
}
/* WATERMARK */
.watermark{
  position:absolute;
  bottom:80px; /* lebih atas supaya tidak ketutup nav */
  left:50%;
  transform:translateX(-50%);
  letter-spacing:3px;
  color:#240046;
}
.motion-bg{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:-1;
}

section{
  position:relative;
  overflow:hidden;
}
</style>
</head>
<body class="lock">

<!-- COVER -->
<section id="cover" class="show">
  <div id="coverCountdown">
    <div class="cd-box" id="cd-days">00</div>
    <div class="cd-box" id="cd-hours">00</div>
    <div class="cd-box" id="cd-minutes">00</div>
    <div class="cd-box" id="cd-seconds">00</div>
  </div>
  <p class="kepada">Kepada Yth</p>
  <h1 id="guest" class="guest-name">Tamu Undangan</h1>
  <button class="btn-open" onclick="openInvitation()">Buka Undangan</button>
</section>

<audio id="music" src="music.mp3" loop></audio>
<div id="musicBtn" onclick="toggleMusic()">♪</div>

<!-- SECTIONS -->
<section>
  <video class="motion-bg" muted loop playsinline preload="none">
    <source src="Profil-umum.mp4" type="video/mp4">
  </video>
</section>
<section>
  <video class="motion-bg" muted loop playsinline preload="none">
    <source src="Qs.mp4" type="video/mp4">
  </video>
</section>

<section>
  <video class="motion-bg" muted loop playsinline preload="none">
    <source src="Profil-wanita.mp4" type="video/mp4">
  </video>
</section>

<section>
  <video class="motion-bg" muted loop playsinline preload="none">
    <source src="Profil-pria.mp4" type="video/mp4">
  </video>
</section>

<section id="tanggal">
  <video class="motion-bg" muted loop playsinline preload="none">
    <source src="Tanggal.mp4" type="video/mp4">
  </video>
</section>

<section id="lokasi">
  <video class="motion-bg" muted loop playsinline preload="none">
    <source src="Lokasi.mp4" type="video/mp4">
  </video>
</section>

<section id="kisah">
  <video class="motion-bg" muted loop playsinline preload="none">
    <source src="Kisah.mp4" type="video/mp4">
  </video>
</section>
<!-- GALERI -->
<section id="galeri">
  <video class="motion-bg" muted loop playsinline preload="none">
    <source src="Gallery.mp4" type="video/mp4">
  </video>
<div class="slider">
  <button class="nav prev" onclick="prevSlide()">❮</button>

  <img src="prewedd1.jpg" class="active">
  <img src="prewedd2.jpg">
  <img src="prewedd3.jpg">
  <img src="prewedd4.jpg">
  <img src="prewedd5.jpg">

  <button class="nav next" onclick="nextSlide()">❯</button>
</div>
  <div class="thumbnails">
    <img src="prewedd1.jpg" onclick="setSlide(0)">
    <img src="prewedd2.jpg" onclick="setSlide(1)">
    <img src="prewedd3.jpg" onclick="setSlide(2)">
    <img src="prewedd4.jpg" onclick="setSlide(3)">
    <img src="prewedd5.jpg" onclick="setSlide(4)">
    <img src="prewedd1.jpg" onclick="setSlide(0)">
  </div>
</section>

<!-- TEMPLATE -->
<section>
  <video class="motion-bg" muted loop playsinline preload="none">
    <source src="Template.mp4" type="video/mp4">
  </video>
  <a href="https://drive.google.com/file/d/1pDAfq905CQca_ioUxJmnZkt2fP-mYEMs/view?usp=drivesdk" target="_blank" class="btn-open">Buka Template Filter IG</a>
</section>

<!-- GIFT -->
<section id="gift">
  <video class="motion-bg" muted loop playsinline preload="none">
    <source src="Gift.mp4" type="video/mp4">
  </video>

  <!-- REKENING 1 -->
  <div class="gift-card">
    <div class="bank-header">
      <img src="Bca.svg" class="bank-logo" alt="BCA">
      <span class="bank-name">BCA a.n Fulan</span>
    </div>

    <div id="rek-bca" class="rek-number">1234567890</div>

    <button class="btn-copy" onclick="copyText('rek-bca')">
      Salin
    </button>
  </div>

  <!-- REKENING 2 -->
  <div class="gift-card">
    <div class="bank-header">
      <img src="Mandiri.svg" class="bank-logo" alt="Mandiri">
      <span class="bank-name">BRI a.n Fulanah</span>
    </div>

    <div id="rek-mandiri" class="rek-number">0987654321</div>

    <button class="btn-copy" onclick="copyText('rek-bri')">
      Salin
    </button>
  </div>

  <!-- ALAMAT RUMAH -->
  <div class="address-box">
    <div class="bank-header">
      <span class="bank-name">Alamat Rumah</span>
    </div>

    <div id="alamat-rumah" class="rek-number">
      Jl. Mawar Indah No. 12<br>
      RT 03 / RW 05<br>
      Kecamatan Sukamaju<br>
      Kota Bandung
    </div>

    <button class="btn-copy address" onclick="copyText('alamat-rumah')">
      Salin
    </button>
  </div>

</section>

<!-- RSVP -->
<section id="rsvp">
  <video class="motion-bg" muted loop playsinline preload="none">
    <source src="Rsvp.mp4" type="video/mp4">
  </video>
  <form id="rsvpForm">
    <label for="nama">Nama</label>
    <input name="nama" placeholder="Nama" required>
    <label for="hadir">Kehadiran</label>
    <select name="hadir">
      <option>Hadir</option>
      <option>Tidak Hadir</option>
    </select>
    <label for="pesan">Ucapan</label>
    <textarea name="pesan" placeholder="Pesan & Doa"></textarea>
    <button type="submit">Kirim RSVP</button>
  </form>

  <div id="rsvpListWrapper">
    <div id="listRsvp"></div>
  </div>
</section>
<section>
  <video class="motion-bg" muted loop playsinline preload="none">
    <source src="Doa.mp4" type="video/mp4">
  </video>
</section>
<!-- TERIMAKASIH -->
<section style="position:relative">
  <video class="motion-bg" muted loop playsinline preload="none">
    <source src="Terimakasih.mp4" type="video/mp4">
  </video>
  <div class="watermark">ILENADIGI</div>
</section>

<!-- NAV -->
<div id="nav">
  <div class="nav-item" onclick="go('tanggal')"><img src="Tanggal.svg"></div>
  <div class="nav-item" onclick="go('lokasi')"><img src="Lokasi.svg"></div>
  <div class="nav-item" onclick="go('kisah')"><img src="Kisah.svg"></div>
  <div class="nav-item" onclick="go('galeri')"><img src="Galeri.svg"></div>
  <div class="nav-item" onclick="go('gift')"><img src="Gift.svg"></div>
  <div class="nav-item" onclick="go('rsvp')"><img src="Rsvp.svg"></div>
</div>

<script>
/* AMBIL ELEMENT */
const guest=document.getElementById("guest");
const cover=document.getElementById("cover");
const nav=document.getElementById("nav");
const music=document.getElementById("music");
const musicBtn=document.getElementById("musicBtn");
const rsvpForm=document.getElementById("rsvpForm");
const listRsvp=document.getElementById("listRsvp");
const cdDays=document.getElementById("cd-days");
const cdHours=document.getElementById("cd-hours");
const cdMinutes=document.getElementById("cd-minutes");
const cdSeconds=document.getElementById("cd-seconds");

/* NAMA TAMU */
const q=new URLSearchParams(location.search);
if(q.get("nama")) guest.innerText = q.get("nama");

/* OPEN UNDANGAN */
function openInvitation(){
  document.body.classList.remove("lock");
  cover.style.display="none";
  nav.classList.add("show");
  musicBtn.style.display="flex";
  music.play();
  musicBtn.classList.add("playing");
  reveal();
}

/* REVEAL SECTION ON SCROLL */
function reveal(){
  document.querySelectorAll("section").forEach(s=>{
    if(s.getBoundingClientRect().top<innerHeight-100) s.classList.add("show");
  });
}
addEventListener("scroll",reveal);

/* NAV */
function go(id){
  document.getElementById(id).scrollIntoView({behavior:"smooth"});
}

/* MUSIC */
function toggleMusic(){
  music.paused ? (music.play(),musicBtn.classList.add("playing")) : (music.pause(),musicBtn.classList.remove("playing"));
}

/* COUNTDOWN */
const target=new Date("2026-11-30T09:00:00").getTime();
setInterval(()=>{
  const diff=target-Date.now();
  if(diff<=0) return;
  cdDays.innerText=Math.floor(diff/86400000).toString().padStart(2,"0");
  cdHours.innerText=Math.floor(diff%86400000/3600000).toString().padStart(2,"0");
  cdMinutes.innerText=Math.floor(diff%3600000/60000).toString().padStart(2,"0");
  cdSeconds.innerText=Math.floor(diff%60000/1000).toString().padStart(2,"0");
},1000);

/* GALERI AUTO SLIDE */
let idx = 0;
const slides = document.querySelectorAll("#galeri .slider img");

function showSlide(i){
  slides.forEach(s => s.classList.remove("active"));
  idx = (i + slides.length) % slides.length;
  slides[idx].classList.add("active");
}

function nextSlide(){
  showSlide(idx + 1);
}

function prevSlide(){
  showSlide(idx - 1);
}

function setSlide(i){
  showSlide(i);
}

// auto slide tetap jalan
setInterval(() => nextSlide(), 4000);

/* COPY REKENING */
function copyText(id){
  navigator.clipboard.writeText(document.getElementById(id).innerText);
  alert("Berhasil disalin!");
}

/* RSVP POST & GET Realtime */
document.addEventListener("DOMContentLoaded", () => {
  const rsvpForm = document.getElementById("rsvpForm");
  const listRsvp = document.getElementById("listRsvp");
  const scriptURL_POST = "https://script.google.com/macros/s/AKfycbyeKMLqakKbfXOIVt-NuLcMZrVLa2ffPi4ZCUslPwsx2Xdz4HTIHya6ghEivJ6GMCgPBQ/exec"; // Apps Script POST
  const scriptURL_GET  = "https://script.google.com/macros/s/AKfycbyeKMLqakKbfXOIVt-NuLcMZrVLa2ffPi4ZCUslPwsx2Xdz4HTIHya6ghEivJ6GMCgPBQ/exec";  // Apps Script GET (JSON)

  // POST data
  if(rsvpForm){
    rsvpForm.addEventListener("submit", e=>{
      e.preventDefault();
      const d = new FormData(rsvpForm);
      fetch(scriptURL_POST,{method:"POST",body:d})
        .then(()=> {
          loadRSVP(); // refresh setelah submit
          rsvpForm.reset();
        })
        .catch(err=>console.error("Error RSVP:",err));
    });
  }

  // GET data realtime
  function loadRSVP(){
    fetch(scriptURL_GET)
      .then(res=>res.json())
      .then(data=>{
        listRsvp.innerHTML="";
        data.reverse().forEach(item=>{
          listRsvp.insertAdjacentHTML("beforeend",`
            <div class="rsvp-item">
              <b>${item.nama}</b><br>
              ${item.hadir}<br>
              <div class="ucapan">${item.pesan || ""}</div>
            </div>
          `);
        });
      })
      .catch(err=>console.error("Error load RSVP:",err));
  }

  loadRSVP();
  setInterval(loadRSVP,10000);
});
</script>
<script>
const motionVideos = document.querySelectorAll('.motion-bg');

const observer = new IntersectionObserver(entries=>{
  entries.forEach(entry=>{
    if(entry.isIntersecting){
      entry.target.play();
    } else {
      entry.target.pause();
    }
  });
},{threshold:0.6});

motionVideos.forEach(v=>observer.observe(v));
</script>
</body>
</html>